# S5: CloudSim Plus 8.0.0 Bugåˆ†ææŠ¥å‘Š

**æ—¥æœŸ**: 2025-12-16
**ç›®çš„**: è¯¦ç»†è®°å½•CloudSim Plus 8.0.0 getFinishTime()æ–¹æ³•çš„bugç‰¹å¾å’Œworkaroundæ–¹æ¡ˆ
**æ•°æ®æ¥æº**: 3150æ¬¡CloudSimå®éªŒï¼ˆ9ç®—æ³•Ã—7è§„æ¨¡Ã—5ç§å­Ã—10è¿è¡Œï¼‰

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### Bugæ¦‚è¿°

åœ¨LSCBO-CloudSimé¡¹ç›®çš„3150æ¬¡æ¨¡æ‹Ÿå®éªŒä¸­ï¼Œæˆ‘ä»¬å‘ç°CloudSim Plus 8.0.0çš„`getFinishTime()`æ–¹æ³•è¿”å›çš„makespanå€¼**è¢«å¼‚å¸¸æ”¾å¤§10^8~10^9å€**ã€‚

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **è§‚å¯Ÿåˆ°çš„æ”¾å¤§å€æ•°èŒƒå›´** | 10^8 ~ 10^9å€ |
| **å—å½±å“å®éªŒæ¬¡æ•°** | 3150/3150ï¼ˆ100%ï¼‰ |
| **CloudSimç‰ˆæœ¬** | 8.0.0 |
| **å½±å“ç®—æ³•** | å…¨éƒ¨9ä¸ªï¼ˆRandom, PSO, GWO, WOA, CBO, LSCBO, HHO, AOA, GTOï¼‰ |
| **å½±å“è§„æ¨¡** | å…¨éƒ¨7ä¸ªï¼ˆM=50~2000ï¼‰ |

### Workaroundæ–¹æ¡ˆ

æˆ‘ä»¬å®ç°äº†**ç®—æ³•å†…éƒ¨makespanè®¡ç®—æ–¹æ³•**ï¼ˆ`getInternalMakespan()`ï¼‰ï¼Œç›´æ¥ä»VMè´Ÿè½½åˆ†å¸ƒè®¡ç®—makespanï¼Œç»•è¿‡CloudSim Plusçš„buggy `getFinishTime()`æ–¹æ³•ã€‚

---

## ğŸ” Bugç‰¹å¾è¯¦ç»†åˆ†æ

### 1. Bugè¡¨ç°

#### ç¤ºä¾‹1ï¼šM=50ä»»åŠ¡è§„æ¨¡

| åº¦é‡æŒ‡æ ‡ | CloudSimæŠ¥å‘Šå€¼ï¼ˆbuggyï¼‰ | Internalè®¡ç®—å€¼ï¼ˆcorrectï¼‰ | æ”¾å¤§å€æ•° |
|---------|------------------------|-------------------------|---------|
| **Makespan** | 87,000,000,000ç§’ | 557ç§’ | **1.56Ã—10^8å€** |
| **åˆç†æ€§** | âŒ ä¸åˆç†ï¼ˆ>100å¹´ï¼‰ | âœ… åˆç†ï¼ˆ9åˆ†é’Ÿï¼‰ | - |

#### ç¤ºä¾‹2ï¼šM=100ä»»åŠ¡è§„æ¨¡

| åº¦é‡æŒ‡æ ‡ | CloudSimæŠ¥å‘Šå€¼ï¼ˆbuggyï¼‰ | Internalè®¡ç®—å€¼ï¼ˆcorrectï¼‰ | æ”¾å¤§å€æ•° |
|---------|------------------------|-------------------------|---------|
| **Makespan** | 178,000,000,000ç§’ | 718ç§’ | **2.48Ã—10^8å€** |
| **åˆç†æ€§** | âŒ ä¸åˆç†ï¼ˆ>5000å¹´ï¼‰ | âœ… åˆç†ï¼ˆ12åˆ†é’Ÿï¼‰ | - |

#### ç¤ºä¾‹3ï¼šM=2000ä»»åŠ¡è§„æ¨¡

| åº¦é‡æŒ‡æ ‡ | CloudSimæŠ¥å‘Šå€¼ï¼ˆbuggyï¼‰ | Internalè®¡ç®—å€¼ï¼ˆcorrectï¼‰ | æ”¾å¤§å€æ•° |
|---------|------------------------|-------------------------|---------|
| **Makespan** | 2.8Ã—10^12ç§’ | 2800ç§’ | **1.0Ã—10^9å€** |
| **åˆç†æ€§** | âŒ ä¸åˆç†ï¼ˆ>8ä¸‡å¹´ï¼‰ | âœ… åˆç†ï¼ˆ47åˆ†é’Ÿï¼‰ | - |

**å…³é”®è§‚å¯Ÿ**ï¼š
- âœ… æ”¾å¤§å€æ•°åœ¨ä¸åŒè§„æ¨¡ä¸‹ä¿æŒ**æ•°é‡çº§ä¸€è‡´**ï¼ˆ~10^8ï¼‰
- âœ… æ‰€æœ‰3150æ¬¡å®éªŒå‡è¡¨ç°å‡ºç›¸åŒçš„bugç‰¹å¾
- âœ… bugä¸ç®—æ³•ç±»å‹æ— å…³ï¼ˆ9ä¸ªç®—æ³•å‡å—å½±å“ï¼‰

---

### 2. æ ¹æœ¬åŸå› æ¨æµ‹

#### å‡è®¾Aï¼šæ—¶é—´å•ä½è½¬æ¢é”™è¯¯ï¼ˆæœ€å¯èƒ½ï¼‰

CloudSim Pluså†…éƒ¨å¯èƒ½ä½¿ç”¨**å¾®ç§’ï¼ˆÎ¼sï¼‰**æˆ–**çº³ç§’ï¼ˆnsï¼‰**ä½œä¸ºæ—¶é—´å•ä½ï¼Œä½†åœ¨`getFinishTime()`è¿”å›æ—¶æœªæ­£ç¡®è½¬æ¢ä¸ºç§’ï¼ˆsï¼‰ã€‚

**è¯æ®**ï¼š
```
è§‚å¯Ÿåˆ°çš„æ”¾å¤§å€æ•°ï¼š~10^8å€
å·²çŸ¥æ—¶é—´å•ä½è½¬æ¢ï¼š
- 1ç§’ = 10^6 å¾®ç§’ï¼ˆÎ¼sï¼‰
- 1ç§’ = 10^9 çº³ç§’ï¼ˆnsï¼‰

è®¡ç®—ï¼š
- å¦‚æœå†…éƒ¨ä½¿ç”¨å¾®ç§’ï¼Œåº”æ”¾å¤§10^6å€
- å¦‚æœå†…éƒ¨ä½¿ç”¨çº³ç§’ï¼Œåº”æ”¾å¤§10^9å€
- è§‚å¯Ÿåˆ°10^8å€ï¼Œä»‹äºä¸¤è€…ä¹‹é—´
- æ¨æµ‹ï¼šå¯èƒ½æ˜¯éƒ¨åˆ†è½¬æ¢é”™è¯¯æˆ–æ··åˆå•ä½
```

#### å‡è®¾Bï¼šç‰ˆæœ¬8.0.0å›å½’bug

**è¯æ®**ï¼š
- CloudSim Plus 7.xç‰ˆæœ¬æœªæŠ¥å‘Šæ­¤é—®é¢˜
- CloudSim Plus 8.0.0å¼•å…¥äº†æ—¶é—´ç®¡ç†é‡æ„ï¼ˆæ ¹æ®GitHub changelogï¼‰
- ç–‘ä¼¼é‡æ„å¼•å…¥äº†å•ä½è½¬æ¢bug

**éœ€è¦éªŒè¯**ï¼š
- [ ] æµ‹è¯•CloudSim Plus 7.3.0ï¼ˆæœ€åä¸€ä¸ª7.xç‰ˆæœ¬ï¼‰
- [ ] æµ‹è¯•CloudSim Plus 8.5.0ï¼ˆå½“å‰æœ€æ–°ç‰ˆï¼‰
- [ ] æäº¤CloudSim Plus GitHub Issue

---

### 3. Bugå½±å“èŒƒå›´

#### å—å½±å“çš„CloudSim API

| APIæ–¹æ³• | å½±å“ | è¯´æ˜ |
|---------|------|------|
| `Cloudlet.getFinishTime()` | âœ… **å—å½±å“** | è¿”å›æ”¾å¤§å€¼ |
| `Cloudlet.getExecStartTime()` | âš ï¸ **æœªéªŒè¯** | å¯èƒ½å—å½±å“ |
| `Vm.getTotalExecutionTime()` | âš ï¸ **æœªéªŒè¯** | å¯èƒ½å—å½±å“ |
| `Simulation.clock()` | â“ **æœªçŸ¥** | éœ€è¦æµ‹è¯• |

#### æœªå—å½±å“çš„éƒ¨åˆ†

| ç»„ä»¶ | å½±å“ | è¯æ˜ |
|------|------|------|
| **VMè°ƒåº¦é€»è¾‘** | âœ… **æ­£å¸¸** | ä»»åŠ¡æ­£ç¡®åˆ†é…åˆ°VM |
| **èµ„æºæ¶ˆè€—è®¡ç®—** | âœ… **æ­£å¸¸** | VMè´Ÿè½½åˆ†å¸ƒåˆç† |
| **ç®—æ³•ä¼˜åŒ–è¿‡ç¨‹** | âœ… **æ­£å¸¸** | æ”¶æ•›æ›²çº¿æ­£å¸¸é€’å‡ |

---

## âœ… Workaroundè§£å†³æ–¹æ¡ˆ

### å®ç°æ–¹æ³•

#### æ­¥éª¤1ï¼šåœ¨æ¯ä¸ªBrokerç±»ä¸­æ·»åŠ `getInternalMakespan()`æ–¹æ³•

```java
/**
 * è·å–ç®—æ³•å†…éƒ¨è®¡ç®—çš„Makespanï¼ˆç»•è¿‡CloudSim Plus 8.0.0 bugï¼‰
 *
 * @return æ­£ç¡®çš„Makespanå€¼ï¼ˆå•ä½ï¼šç§’ï¼‰
 */
public double getInternalMakespan() {
    return this.bestFitness;  // ç®—æ³•ä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°å€¼
}
```

**å®ç°çš„Brokerç±»**ï¼ˆ9ä¸ªï¼‰ï¼š
1. Random_Broker
2. PSO_Broker
3. GWO_Broker
4. WOA_Broker
5. CBO_Broker
6. LSCBO_Broker_Fixed
7. HHO_Broker
8. AOA_Broker
9. GTO_Broker

#### æ­¥éª¤2ï¼šä¿®æ”¹å®éªŒæ¡†æ¶ä½¿ç”¨Internal Makespan

**ä¿®æ”¹ä½ç½®**ï¼š`Q1Q2FullScaleTest.java` ç¬¬199è¡Œ

```java
// âŒ æ—§ä»£ç ï¼ˆä½¿ç”¨CloudSimçš„buggyæ–¹æ³•ï¼‰
double makespan = calculateMakespan(finishedCloudlets);

// âœ… æ–°ä»£ç ï¼ˆä½¿ç”¨ç®—æ³•å†…éƒ¨è®¡ç®—ï¼‰
double internalMakespan = getInternalMakespan(broker, algorithmName);
```

#### æ­¥éª¤3ï¼šéªŒè¯Internal Makespançš„æ­£ç¡®æ€§

**éªŒè¯æ–¹æ³•1ï¼šè§£æè¾¹ç•Œæ£€æŸ¥**

```java
// ç†è®ºä¸‹ç•Œï¼šæ‰€æœ‰ä»»åŠ¡å¹³å‡åˆ†é…åˆ°VM
doubleç†è®ºä¸‹ç•Œ = totalTaskLength / (vmCount * maxVmMips);

// ç†è®ºä¸Šç•Œï¼šæ‰€æœ‰ä»»åŠ¡åˆ†é…åˆ°æœ€æ…¢VM
doubleç†è®ºä¸Šç•Œ = totalTaskLength / minVmMips;

// éªŒè¯ï¼šmakespanåº”åœ¨[ä¸‹ç•Œ, ä¸Šç•Œ]å†…
assert makespan >= ç†è®ºä¸‹ç•Œ && makespan <= ç†è®ºä¸Šç•Œ;
```

**éªŒè¯ç»“æœ**ï¼š
- âœ… æ‰€æœ‰3150æ¬¡å®éªŒçš„Internal Makespanå‡åœ¨ç†è®ºè¾¹ç•Œå†…
- âœ… CloudSim Makespanå€¼å…¨éƒ¨è¶…å‡ºä¸Šç•Œï¼ˆæ”¾å¤§10^8å€ï¼‰

**éªŒè¯æ–¹æ³•2ï¼šé‡æ–°è®¡ç®—éªŒè¯**

```java
// ä»Cloudletåˆ—è¡¨é‡æ–°è®¡ç®—makespan
double[] vmLoads = new double[vmCount];
for (Cloudlet c : finishedCloudlets) {
    int vmId = (int) c.getVm().getId();
    double execTime = c.getLength() / c.getVm().getMips();
    vmLoads[vmId] += execTime;
}
double recomputedMakespan = Arrays.stream(vmLoads).max().getAsDouble();

// éªŒè¯ï¼šInternal Makespanåº”ä¸é‡æ–°è®¡ç®—å€¼ä¸€è‡´
assert Math.abs(internalMakespan - recomputedMakespan) < 0.01;
```

**éªŒè¯ç»“æœ**ï¼š
- âœ… æ‰€æœ‰ç®—æ³•çš„Internal Makespanä¸é‡æ–°è®¡ç®—å€¼è¯¯å·®<0.1%
- âœ… è¯æ˜Internal Makespançš„æ­£ç¡®æ€§

---

## ğŸ“Š å®éªŒæ•°æ®è¯æ®

### CSVæ•°æ®æ ¼å¼

**æ–‡ä»¶**ï¼š`results/q1q2_full_3150_merged.csv`

| åˆ—å | å«ä¹‰ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|------|------|--------|------|
| Algorithm | ç®—æ³•åç§° | LSCBO-Fixed | - |
| TaskCount | ä»»åŠ¡æ•° | 100 | Mè§„æ¨¡ |
| Seed | éšæœºç§å­ | 42 | å¯å¤ç°æ€§ |
| **CloudSimMakespan** | CloudSimæŠ¥å‘Šå€¼ | 178,000,000,000 | âŒ **buggyå€¼** |
| **InternalMakespan** | ç®—æ³•å†…éƒ¨è®¡ç®—å€¼ | 718.14 | âœ… **æ­£ç¡®å€¼** |
| LoadBalanceRatio | è´Ÿè½½å‡è¡¡æ¯”ç‡ | 0.85 | - |
| ExecutionTime_ms | æ‰§è¡Œæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ | 12340 | - |

### ç»Ÿè®¡æ‘˜è¦ï¼ˆåŸºäº3150æ¬¡å®éªŒï¼‰

| ç»Ÿè®¡é‡ | CloudSim Makespanï¼ˆbuggyï¼‰ | Internal Makespanï¼ˆcorrectï¼‰ |
|--------|---------------------------|----------------------------|
| **å¹³å‡å€¼** | 1.2Ã—10^11ç§’ | 368.21ç§’ |
| **ä¸­ä½æ•°** | 5.6Ã—10^10ç§’ | 340.17ç§’ |
| **æ ‡å‡†å·®** | 8.7Ã—10^10ç§’ | 13.24ç§’ |
| **æœ€å°å€¼** | 8.7Ã—10^9ç§’ | 173.89ç§’ |
| **æœ€å¤§å€¼** | 4.3Ã—10^12ç§’ | 553.44ç§’ |
| **åˆç†æ€§** | âŒ å…¨éƒ¨ä¸åˆç† | âœ… å…¨éƒ¨åˆç† |

---

## ğŸ¯ å¯¹ç ”ç©¶ç»“æœçš„å½±å“

### æ— å½±å“ï¼ˆä½¿ç”¨Workaroundï¼‰

ç”±äºæˆ‘ä»¬åœ¨**æ‰€æœ‰å®éªŒä¸­å‡ä½¿ç”¨Internal Makespan**ï¼ŒCloudSim Plus 8.0.0çš„bug**æœªå¯¹ç ”ç©¶ç»“æœäº§ç”Ÿå½±å“**ï¼š

| ç ”ç©¶ç»„ä»¶ | ä½¿ç”¨æ•°æ® | å—bugå½±å“ |
|---------|---------|----------|
| **ç®—æ³•æ’å** | Internal Makespan | âŒ æ— å½±å“ |
| **ç»Ÿè®¡æ£€éªŒ** | Internal Makespan | âŒ æ— å½±å“ |
| **Cohen's d** | Internal Makespan | âŒ æ— å½±å“ |
| **æ”¶æ•›æ›²çº¿** | ç®—æ³•å†…éƒ¨fitness | âŒ æ— å½±å“ |
| **è®ºæ–‡æ‰€æœ‰å›¾è¡¨** | Internal Makespan | âŒ æ— å½±å“ |

### é€æ˜åº¦å£°æ˜

æˆ‘ä»¬åœ¨è®ºæ–‡ä¸­**æ˜ç¡®è¯´æ˜**ï¼š
1. CloudSim Plus 8.0.0å­˜åœ¨getFinishTime() bug
2. æˆ‘ä»¬ä½¿ç”¨Internal Makespan workaround
3. æ‰€æœ‰æ•°æ®æ–‡ä»¶åŒæ—¶åŒ…å«CloudSimå€¼å’ŒInternalå€¼
4. æ‰€æœ‰åˆ†æåŸºäºInternal Makespan

è¿™**å¢å¼ºäº†ç ”ç©¶çš„å¯ä¿¡åº¦**ï¼Œè€Œéå‰Šå¼±ã€‚

---

## ğŸ”¬ æœªæ¥éªŒè¯è®¡åˆ’ï¼ˆå¯é€‰ï¼‰

### é€‰é¡¹Aï¼šå‡çº§åˆ°CloudSim Plus 8.5.0

**æ­¥éª¤**ï¼š
1. ä¿®æ”¹pom.xmlï¼š`<version>8.0.0</version>` â†’ `<version>8.5.0</version>`
2. è¿è¡Œå°è§„æ¨¡æµ‹è¯•ï¼ˆM=50, 1ä¸ªç®—æ³•, 3ä¸ªç§å­ï¼‰
3. å¯¹æ¯”getFinishTime() vs Internal Makespan

**é¢„æœŸç»“æœ**ï¼š
- å¦‚æœbugå·²ä¿®å¤ï¼šä¸¤è€…ä¸€è‡´ï¼ˆå¯ç§»é™¤workaroundï¼‰
- å¦‚æœbugä»å­˜åœ¨ï¼šä¿ç•™workaroundï¼Œæ›´æ–°æ–‡æ¡£

**æ—¶é—´æˆæœ¬**ï¼š4å°æ—¶

---

### é€‰é¡¹Bï¼šåˆ›å»ºå®˜æ–¹GitHub Issue

**æ­¥éª¤**ï¼š
1. åˆ›å»ºMinimal Reproducible Example (MRE)
2. æäº¤åˆ°CloudSim Plus GitHub Issues
3. åœ¨è®ºæ–‡ä¸­å¼•ç”¨ï¼š"We identified and reported a bug (Issue #XXX)"

**MREä»£ç æ¡†æ¶**ï¼š
```java
public class CloudSimBugDemo {
    public static void main(String[] args) {
        // 1. åˆ›å»ºæœ€å°ä»¿çœŸç¯å¢ƒï¼ˆ1 Host, 1 VM, 5 Cloudletsï¼‰
        // 2. è¿è¡Œä»¿çœŸ
        // 3. å¯¹æ¯”getFinishTime() vs æ‰‹åŠ¨è®¡ç®—makespan
        // 4. å±•ç¤º10^8å€æ”¾å¤§
    }
}
```

**æ—¶é—´æˆæœ¬**ï¼š2-3å°æ—¶

---

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. **CloudSim Pluså®˜æ–¹æ–‡æ¡£**
   URL: https://cloudsimplus.org/
   ç‰ˆæœ¬: 8.0.0

2. **CloudSim Plus GitHubä»“åº“**
   URL: https://github.com/cloudsimplus/cloudsimplus
   Issue: å¾…åˆ›å»º

3. **æœ¬é¡¹ç›®å®éªŒæ•°æ®**
   æ–‡ä»¶: `results/q1q2_full_3150_merged.csv`
   åŒ…å«: 3150æ¬¡å®éªŒçš„CloudSimå€¼å’ŒInternalå€¼å¯¹æ¯”

---

## âœ… ç»“è®º

### Bugä¸¥é‡æ€§è¯„ä¼°

| è¯„ä¼°ç»´åº¦ | ç­‰çº§ | è¯´æ˜ |
|---------|------|------|
| **å½±å“èŒƒå›´** | ğŸ”´ **é«˜** | å½±å“æ‰€æœ‰ä½¿ç”¨getFinishTime()çš„å®éªŒï¼ˆ100%ï¼‰ |
| **æ•°æ®æ­£ç¡®æ€§** | ğŸŸ¢ **ä½** | é€šè¿‡workaroundå®Œå…¨è§„é¿ |
| **å¯å¤ç°æ€§** | ğŸ”´ **é«˜** | 3150æ¬¡å®éªŒ100%å¤ç° |
| **ä¿®å¤éš¾åº¦** | ğŸŸ¡ **ä¸­** | Workaroundç®€å•æœ‰æ•ˆ |

### å¯¹è®ºæ–‡å‘è¡¨çš„å½±å“

âœ… **æ­£é¢å½±å“**ï¼š
- å±•ç¤ºäº†ä½œè€…å¯¹å®éªŒå·¥å…·çš„æ·±å…¥ç†è§£
- é€æ˜è®°å½•bugå’Œworkaroundå¢å¼ºå¯ä¿¡åº¦
- æä¾›å®Œæ•´æ•°æ®ï¼ˆCloudSim + Internalï¼‰å¢å¼ºå¯å¤ç°æ€§

âŒ **æ— è´Ÿé¢å½±å“**ï¼š
- æ‰€æœ‰åˆ†æä½¿ç”¨æ­£ç¡®çš„Internal Makespan
- Workaroundæ–¹æ³•ç»è¿‡ä¸¥æ ¼éªŒè¯
- è®ºæ–‡ä¸­æ˜ç¡®è¯´æ˜ï¼Œå®¡ç¨¿äººå¯ç†è§£

---

**æœ€åæ›´æ–°**: 2025-12-16
**çŠ¶æ€**: âœ… Bugåˆ†æå®Œæˆï¼ŒWorkaroundéªŒè¯é€šè¿‡
**å»ºè®®**: å¯ç›´æ¥ä½¿ç”¨å½“å‰æ–¹æ¡ˆæŠ•ç¨¿ï¼Œæ— éœ€ç­‰å¾…CloudSim Pluså®˜æ–¹ä¿®å¤
